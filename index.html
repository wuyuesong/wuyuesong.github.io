<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/%5Cimages/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/%5Cimages/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/%5Cimages/favicon-16x16-next.png">
  <link rel="mask-icon" href="/%5Cimages/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"wuyuesong.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="wys的个人博客">
<meta property="og:url" content="https://wuyuesong.github.io/index.html">
<meta property="og:site_name" content="wys的个人博客">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://wuyuesong.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>wys的个人博客</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?176038d5e76ea511f3c7ecd6a3813b97";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">wys的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">你有很多事放不下？做人要潇洒一点~</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/21/cs61c/cs61c_lab10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/21/cs61c/cs61c_lab10/" class="post-title-link" itemprop="url">cs61c_lab10</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-10-21 18:56:27 / Modified: 19:15:00" itemprop="dateCreated datePublished" datetime="2023-10-21T18:56:27+08:00">2023-10-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab10">cs61c_lab10</h1>
<h3 id="part1-multi-threading-programming-using-openmp">Part1:
Multi-threading programming using OpenMP</h3>
<h4 id="exercise-2---vector-addition">Exercise 2 - Vector Addition</h4>
<p>方法1如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">v_add_optimized_adjacent</span><span class="params">(<span class="keyword">double</span>* x, <span class="keyword">double</span>* y, <span class="keyword">double</span>* z)</span> </span>&#123;</span><br><span class="line">     <span class="meta">#<span class="meta-keyword">pragma</span> omp parallel</span></span><br><span class="line">	&#123;</span><br><span class="line">        <span class="keyword">int</span> num_threads = <span class="built_in">omp_get_num_threads</span>();</span><br><span class="line">        <span class="keyword">int</span> id = <span class="built_in">omp_get_thread_num</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=id; i&lt;ARRAY_SIZE; i+= num_threads)</span><br><span class="line">			z[i] = x[i] + y[i];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">v_add_optimized_chunks</span><span class="params">(<span class="keyword">double</span>* x, <span class="keyword">double</span>* y, <span class="keyword">double</span>* z)</span> </span>&#123;</span><br><span class="line">          <span class="meta">#<span class="meta-keyword">pragma</span> omp parallel</span></span><br><span class="line">	&#123;</span><br><span class="line">        <span class="keyword">int</span> num_threads = <span class="built_in">omp_get_num_threads</span>();</span><br><span class="line">        <span class="keyword">int</span> id = <span class="built_in">omp_get_thread_num</span>();</span><br><span class="line">        <span class="keyword">if</span> (id != num_threads - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=ARRAY_SIZE/num_threads*id; i&lt;ARRAY_SIZE/num_threads*(id + <span class="number">1</span>); i++)</span><br><span class="line">			    z[i] = x[i] + y[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=ARRAY_SIZE/num_threads*id; i&lt;ARRAY_SIZE; i++)</span><br><span class="line">			    z[i] = x[i] + y[i];</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="exercise-3---dot-product">Exercise 3 - Dot Product</h4>
<p>不使用reduction的代码如下,不知道题目想干什么，这部分参考了<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> ，感觉还是不是很符合题意：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dotp_manual_optimized</span><span class="params">(<span class="keyword">double</span>* x, <span class="keyword">double</span>* y, <span class="keyword">int</span> arr_size)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">double</span> global_sum = <span class="number">0.0</span>;</span><br><span class="line">  <span class="keyword">int</span> num_threads; </span><br><span class="line">  <span class="meta">#<span class="meta-keyword">pragma</span> omp parallel</span></span><br><span class="line">  &#123;</span><br><span class="line">    num_threads = <span class="built_in">omp_get_num_threads</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">double</span> *sum = (<span class="keyword">double</span> *)<span class="built_in">malloc</span>(num_threads * <span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">double</span>));</span><br><span class="line">  <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(sum));</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> omp parallel</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">int</span> id = <span class="built_in">omp_get_thread_num</span>();</span><br><span class="line">    <span class="keyword">double</span> now = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = id; i &lt; arr_size; i += num_threads) &#123;</span><br><span class="line">        now += x[i] * y[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sum[id] = now;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num_threads; i ++) &#123;</span><br><span class="line">    global_sum += sum[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">free</span>(sum);</span><br><span class="line">  <span class="keyword">return</span> global_sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是使用了reduction的代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dotp_reduction_optimized</span><span class="params">(<span class="keyword">double</span>* x, <span class="keyword">double</span>* y, <span class="keyword">int</span> arr_size)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">double</span> global_sum = <span class="number">0.0</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> omp parallel</span></span><br><span class="line">  &#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> omp for reduction(+:global_sum)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr_size; i++)</span><br><span class="line">      global_sum += x[i] * y[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> global_sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="part-2-intro-to-multi-processing-programming">Part 2: Intro to
multi-processing programming</h2>
<p>这题貌似直接使用gcc-11会报错，可以改用gcc-9。或者把变量的定义放进<code>server_utils.c</code>
然后将 <code>server_utils.h</code> 中的变量加上<code>extern</code>。</p>
<p>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">      client_socket_number = <span class="built_in">accept</span>(*socket_number,</span><br><span class="line">                                    (struct sockaddr *) &amp;client_address,</span><br><span class="line">                                    (<span class="keyword">socklen_t</span> * ) &amp; client_address_length);</span><br><span class="line">      <span class="keyword">if</span> (client_socket_number &lt; <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="built_in">perror</span>(<span class="string">&quot;Error accepting socket&quot;</span>);</span><br><span class="line">         <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;Accepted connection from %s on port %d\n&quot;</span>,</span><br><span class="line">             <span class="built_in">inet_ntoa</span>(client_address.sin_addr), client_address.sin_port);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">pid_t</span> parent_pid = <span class="built_in">getpid</span>();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> PROC</span></span><br><span class="line">      <span class="comment">// PART2 TASK: Implement forking</span></span><br><span class="line">      <span class="comment">/* YOUR CODE HERE */</span></span><br><span class="line">      <span class="keyword">pid_t</span> child_pid = fork();</span><br><span class="line">      <span class="keyword">if</span> (child_pid != <span class="number">0</span>) &#123;</span><br><span class="line">         <span class="comment">// Kill child process if parent dies</span></span><br><span class="line">         <span class="keyword">int</span> r = <span class="built_in">prctl</span>(PR_SET_PDEATHSIG, SIGTERM);</span><br><span class="line"></span><br><span class="line">         <span class="comment">/* YOUR CODE HERE */</span></span><br><span class="line">         <span class="built_in">dispatch</span>(client_socket_number);</span><br><span class="line">         <span class="comment">// Exit with code 1 when there was an error, </span></span><br><span class="line">         <span class="comment">// or when the parent has been killed</span></span><br><span class="line">         <span class="keyword">if</span> (r == <span class="number">-1</span> || <span class="built_in">getppid</span>() != parent_pid) &#123;</span><br><span class="line">            <span class="built_in">perror</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">/* YOUR CODE HERE */</span></span><br><span class="line">         <span class="built_in">exit</span>(EXIT_SUCCESS);</span><br><span class="line">      &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">      <span class="built_in">dispatch</span>(client_socket_number);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>https://github.com/chibinz/CS110/blob/master/lab/lab10/dotp.c<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/20/cs61c/cs61c_lab9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/20/cs61c/cs61c_lab9/" class="post-title-link" itemprop="url">cs61c_lab9</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-10-20 11:16:27" itemprop="dateCreated datePublished" datetime="2023-10-20T11:16:27+08:00">2023-10-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-21 18:54:22" itemprop="dateModified" datetime="2023-10-21T18:54:22+08:00">2023-10-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab9">cs61c_lab9</h1>
<h3 id="exercise-1---familiarize-yourself-with-the-simd-functions">Exercise
1 - Familiarize Yourself with the SIMD Functions</h3>
<ol type="1">
<li><p>__m128 _mm_div_ps (__m128 a, __m128 b)</p></li>
<li><p>__m128i _mm_max_epi8 (__m128i a, __m128i b)</p></li>
<li><p>__m128i _mm_sra_epi16 (__m128i a, __m128i count)</p></li>
</ol>
<h3 id="exercise-2---writing-simd-code">Exercise 2 - Writing SIMD
Code</h3>
<p>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">sum_simd</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> vals[NUM_ELEMS])</span> </span>&#123;</span><br><span class="line">	<span class="keyword">clock_t</span> start = <span class="built_in">clock</span>();</span><br><span class="line">	__m128i _127 = _mm_set1_epi32(<span class="number">127</span>);		<span class="comment">// This is a vector with 127s in it... Why might you need this?</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> result = <span class="number">0</span>;				   <span class="comment">// This is where you should put your final result!</span></span><br><span class="line">	<span class="comment">/* DO NOT DO NOT DO NOT DO NOT WRITE ANYTHING ABOVE THIS LINE. */</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">unsigned</span> <span class="keyword">int</span> w = <span class="number">0</span>; w &lt; OUTER_ITERATIONS; w++) &#123;</span><br><span class="line">		<span class="comment">/* YOUR CODE GOES HERE */</span></span><br><span class="line">        __m128i result_itr = _mm_setzero_si128();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_ELEMS / <span class="number">4</span> * <span class="number">4</span>; i += <span class="number">4</span>) &#123;</span><br><span class="line">            __m128i vals_m128i = _mm_loadu_si128((__m128i *) &amp;vals[i]);</span><br><span class="line">            result_itr = _mm_add_epi32(result_itr ,_mm_and_si128(vals_m128i, _mm_cmpgt_epi32(vals_m128i, _127)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">int</span> results[<span class="number">4</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        _mm_storeu_si128((__m128i *)results, result_itr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i ++) &#123;</span><br><span class="line">            result += results[i];</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">/* You&#x27;ll need a tail case. */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = NUM_ELEMS / <span class="number">4</span> * <span class="number">4</span>; i &lt; NUM_ELEMS; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(vals[i] &gt;= <span class="number">128</span>) result += vals[i];</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">clock_t</span> end = <span class="built_in">clock</span>();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Time taken: %Lf s\n&quot;</span>, (<span class="keyword">long</span> <span class="keyword">double</span>)(end - start) / CLOCKS_PER_SEC);</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="exercise-3---loop-unrolling">Exercise 3 - Loop Unrolling</h3>
<p>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">sum_simd_unrolled</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">int</span> vals[NUM_ELEMS])</span> </span>&#123;</span><br><span class="line">	<span class="keyword">clock_t</span> start = <span class="built_in">clock</span>();</span><br><span class="line">	__m128i _127 = _mm_set1_epi32(<span class="number">127</span>);</span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">unsigned</span> <span class="keyword">int</span> w = <span class="number">0</span>; w &lt; OUTER_ITERATIONS; w++) &#123;</span><br><span class="line">		<span class="comment">/* COPY AND PASTE YOUR sum_simd() HERE */</span></span><br><span class="line">		<span class="comment">/* MODIFY IT BY UNROLLING IT */</span></span><br><span class="line">        __m128i result_itr = _mm_setzero_si128();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NUM_ELEMS / <span class="number">16</span> * <span class="number">16</span>; i += <span class="number">16</span>) &#123;</span><br><span class="line">            __m128i vals_m128i = _mm_loadu_si128((__m128i *) &amp;vals[i]);</span><br><span class="line">            result_itr = _mm_add_epi32(result_itr ,_mm_and_si128(vals_m128i, _mm_cmpgt_epi32(vals_m128i, _127)));</span><br><span class="line">            vals_m128i = _mm_loadu_si128((__m128i *) &amp;vals[i + <span class="number">4</span>]);</span><br><span class="line">            result_itr = _mm_add_epi32(result_itr ,_mm_and_si128(vals_m128i, _mm_cmpgt_epi32(vals_m128i, _127)));</span><br><span class="line">            vals_m128i = _mm_loadu_si128((__m128i *) &amp;vals[i + <span class="number">8</span>]);</span><br><span class="line">            result_itr = _mm_add_epi32(result_itr ,_mm_and_si128(vals_m128i, _mm_cmpgt_epi32(vals_m128i, _127)));</span><br><span class="line">            vals_m128i = _mm_loadu_si128((__m128i *) &amp;vals[i + <span class="number">12</span>]);</span><br><span class="line">            result_itr = _mm_add_epi32(result_itr ,_mm_and_si128(vals_m128i, _mm_cmpgt_epi32(vals_m128i, _127)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">int</span> results[<span class="number">4</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        _mm_storeu_si128((__m128i *)results, result_itr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i ++) &#123;</span><br><span class="line">            result += results[i];</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">/* You&#x27;ll need 1 or maybe 2 tail cases here. */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = NUM_ELEMS / <span class="number">16</span> * <span class="number">16</span>; i &lt; NUM_ELEMS; i ++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(vals[i] &gt;= <span class="number">128</span>) result += vals[i];</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">clock_t</span> end = <span class="built_in">clock</span>();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Time taken: %Lf s\n&quot;</span>, (<span class="keyword">long</span> <span class="keyword">double</span>)(end - start) / CLOCKS_PER_SEC);</span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/14/cs61c/cs61c_lab8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/14/cs61c/cs61c_lab8/" class="post-title-link" itemprop="url">cs61c_lab8</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-10-14 22:29:27 / Modified: 22:32:28" itemprop="dateCreated datePublished" datetime="2023-10-14T22:29:27+08:00">2023-10-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab8">cs61c_lab8</h1>
<p><strong>Exercise 1 - Working with CAMERA</strong> 地址序列为 4D, 1E,
7F, 4C, 8E, CF, 6D, D8, 3B, E2</p>
<ol type="1">
<li>32字节。</li>
<li>TLB Hits: 3, TLB Misses: 7. Page Hits 0, Page Faults 7.</li>
<li>没有Page Hits，也不会有Page
Hits，因为实验环境中frame的数量和TLB中页面的数量是一样的。</li>
<li>首先访问TLB，TLB没有命中。接着访问页表，页表中有效位为0，物理内存中没有该帧，引发缺页错误，从磁盘中将该帧载入物理内存，然后将物理地址写入页表和TLB。</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/14/cs61c/cs61c_lab8/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/14/cs61c/cs61c_lab7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/14/cs61c/cs61c_lab7/" class="post-title-link" itemprop="url">cs61c_lab7</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-10-14 22:20:27 / Modified: 22:32:29" itemprop="dateCreated datePublished" datetime="2023-10-14T22:20:27+08:00">2023-10-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab7">cs61c_lab7</h1>
<h4 id="exercise-1"><strong>Exercise 1:</strong></h4>
<p><strong>Scenario 1:</strong> 1. Because (Step Size) * 4 in bytes (32
bytes) is exactly equal to Cache Size in bytes. 2. hit rate will always
be zero. because the index portion is always 00, and the address we
access is always mapped to the first set.However the tag portion is
always different, so the first cache line is always evicted so that the
hit rate will always be zero. 3. Change Step Size to 1</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/14/cs61c/cs61c_lab7/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/13/cs61c/cs61c_lab6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/13/cs61c/cs61c_lab6/" class="post-title-link" itemprop="url">cs61c_lab6</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-10-13 10:21:27" itemprop="dateCreated datePublished" datetime="2023-10-13T10:21:27+08:00">2023-10-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-14 19:00:06" itemprop="dateModified" datetime="2023-10-14T19:00:06+08:00">2023-10-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab6">cs61c_lab6</h1>
<p><strong>Exercise 1 - Inefficiencies Everywhere</strong></p>
<p><strong>1. Max Delay</strong></p>
<p><span class="math display">\[
Max\_Delay=CLK\_to\_Q\_Delay + CL\_Delay + Setup\_Time\\
=CLK\_to\_Q\_Delay + (Adder\_Delay + Multiplication\_Delay) +
Setup\_Time\\
=10ns+(45ns+60ns)+10ns\\
=125ns
\]</span></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/13/cs61c/cs61c_lab6/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/12/cs61c/cs61c_lab5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/12/cs61c/cs61c_lab5/" class="post-title-link" itemprop="url">cs61c_lab5</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-10-12 23:12:27 / Modified: 23:16:34" itemprop="dateCreated datePublished" datetime="2023-10-12T23:12:27+08:00">2023-10-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab5">cs61c_lab5</h1>
<h3 id="part-1-sub-circuits">Part 1: Sub-Circuits</h3>
<p><strong>NAND1</strong></p>
<p><img src="/2023/10/12/cs61c/cs61c_lab5/image-20231012185639742.png"></p>
<p><strong>NOR1</strong></p>
<p><img src="/2023/10/12/cs61c/cs61c_lab5/image-20231012185627597.png"></p>
<p><strong>XOR1</strong></p>
<p><img src="/2023/10/12/cs61c/cs61c_lab5/image-20231012185715957.png"></p>
<p><strong>MUX2</strong></p>
<p>通过列真值表可以得到以下逻辑式：</p>
<p><span class="math inline">\(\neg{A}BSel+A\neg{B}\neg{Sel}+AB\neg{Sel}+ABSel=RESULT\)</span></p>
<p>可以画出如下电路：</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/12/cs61c/cs61c_lab5/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/10/11/cs61c/cs61c_lab4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/11/cs61c/cs61c_lab4/" class="post-title-link" itemprop="url">cs61c_lab4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-10-11 20:04:27" itemprop="dateCreated datePublished" datetime="2023-10-11T20:04:27+08:00">2023-10-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-12 18:50:48" itemprop="dateModified" datetime="2023-10-12T18:50:48+08:00">2023-10-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c-lab4"><a href="#cs61c-lab4" class="headerlink" title="cs61c_lab4"></a>cs61c_lab4</h1><p><strong>Exercise 1: Debugging megalistmanips.s</strong></p>
<p>错误之处：</p>
<ol>
<li>偏移量没有乘4。</li>
<li>偏移量应该加在结构体中数组的地址上而不是数组的地址的地址上。</li>
<li>调用函数之前没有保存s1。</li>
<li>在内存中取字应该是lw，而不是la。</li>
<li>将s1中的内容移入a1，而不是将s1指向的地址中的内容移入a1。</li>
</ol>
<p>代码如下：</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/10/11/cs61c/cs61c_lab4/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/09/30/cs61c/cs61c_lab3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/09/30/cs61c/cs61c_lab3/" class="post-title-link" itemprop="url">cs61c_lab3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-09-30 18:59:27" itemprop="dateCreated datePublished" datetime="2023-09-30T18:59:27+08:00">2023-09-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-10-11 13:54:15" itemprop="dateModified" datetime="2023-10-11T13:54:15+08:00">2023-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab3">cs61c_lab3</h1>
<p><strong>Exercise 1: Familiarizing yourself with Venus</strong></p>
<ol type="1">
<li><code>.data</code> 指令用于指定程序中数据段的开始。在这个部分中，可以定义程序将使用的变量和数据。<code>.word</code> 指令用于在 <code>.data</code> 部分内分配空间并初始化数据值。<code>.text</code> 指令用于指定程序的代码或文本段的开始。</li>
<li>最后输出结果是34，表示斐波那契数列的第九项。</li>
<li>n的地址是0x10000008</li>
<li>在运行过程中把t3改为0x0000000D</li>
</ol>
<blockquote>
<p>题外话：我网上查到说ecall的调用号应该在a7，但是这个代码里的调用号不知道为什么在a0，可能是cs61c自己开发的这个Venus模拟器的问题。</p>
</blockquote>
<p><strong>Exercise 2: Translating from C to RISC-V</strong></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/09/30/cs61c/cs61c_lab3/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/09/28/cs61c/cs61c_lab2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/09/28/cs61c/cs61c_lab2/" class="post-title-link" itemprop="url">cs61c_lab2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-09-28 22:30:27" itemprop="dateCreated datePublished" datetime="2023-09-28T22:30:27+08:00">2023-09-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-09-30 17:16:18" itemprop="dateModified" datetime="2023-09-30T17:16:18+08:00">2023-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab2">cs61c_lab2</h1>
<p><strong>Exercise 0: Makefiles</strong></p>
<p>看makefile文件回答问题。</p>
<p>我的回答如下：</p>
<ol type="1">
<li>clean</li>
<li>all</li>
<li>gcc</li>
<li>c99</li>
<li>可以使用$(FOO)引用FOO变量</li>
<li>Darwin是macos的内核</li>
<li>第31行从目标文件创建了lfsr程序</li>
</ol>
<p><strong>Exercise 1: Bit Operations</strong></p>
<p>我的代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;bit_ops.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="title">get_bit</span><span class="params">(<span class="keyword">unsigned</span> x,</span></span></span><br><span class="line"><span class="params"><span class="function">                 <span class="keyword">unsigned</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x &gt;&gt; n) &amp; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_bit</span><span class="params">(<span class="keyword">unsigned</span> * x,</span></span></span><br><span class="line"><span class="params"><span class="function">             <span class="keyword">unsigned</span> n,</span></span></span><br><span class="line"><span class="params"><span class="function">             <span class="keyword">unsigned</span> v)</span> </span>&#123;</span><br><span class="line">    *x = *x &amp; ~(<span class="number">1</span> &lt;&lt; n);</span><br><span class="line">    *x = *x | (v &lt;&lt; n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">flip_bit</span><span class="params">(<span class="keyword">unsigned</span> * x,</span></span></span><br><span class="line"><span class="params"><span class="function">              <span class="keyword">unsigned</span> n)</span> </span>&#123;</span><br><span class="line">    *x = *x ^ (<span class="number">1</span> &lt;&lt; n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/09/28/cs61c/cs61c_lab2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://wuyuesong.github.io/2023/09/27/cs61c/cs61c_lab1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wys的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/09/27/cs61c/cs61c_lab1/" class="post-title-link" itemprop="url">cs61c_lab1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-09-27 11:22:27 / Modified: 19:36:20" itemprop="dateCreated datePublished" datetime="2023-09-27T11:22:27+08:00">2023-09-27</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61c/" itemprop="url" rel="index"><span itemprop="name">cs61c</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="cs61c_lab1">cs61c_lab1</h1>
<p><strong>Exercise 1: See what you can C</strong></p>
<p>定义常量V0,V1,V2,V3使得程序输出符合要求，同时要求四个常量中不同的值最少。</p>
<p>V0,V1,V3只能是3，V2取3可以满足不同的值最少。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> V0 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> V1 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> V2 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> V3 3</span></span><br></pre></td></tr></table></figure>
<p><strong>Exercise 2: Catch those bugs!</strong></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/09/27/cs61c/cs61c_lab1/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  











<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    /*
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };*/
    window.MathJax = {
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
